// components/recursos.components.c4 - Microservicio de Recursos (KAPO PRINCIPAL - ESTRUCTURA REAL)

model {
  // ===== ðŸŸ¦ API GRAPHQL =====
  rc_graphql_api = application 'GraphQL API' {
    description 'API GraphQL principal del backend para mÃ³dulo de recursos'
    technology 'Apollo Server + Express.js'

    style {
      color blue  // Azul para APIs
    }
  }

  // ===== ðŸŸ© SERVICIOS PRINCIPALES =====
  rc_recurso_service = application 'RecursoService' {
    description 'Servicio principal para gestiÃ³n completa de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_tipo_recurso_service = application 'TipoRecursoService' {
    description 'Servicio para gestiÃ³n de tipos de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_unidad_service = application 'UnidadService' {
    description 'Servicio para gestiÃ³n de unidades de medida'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸŸ¨ RESOLVERS =====
  rc_recurso_resolver = component 'RecursoResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones CRUD de recursos'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  rc_tipo_recurso_resolver = component 'TipoRecursoResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones de tipos de recursos'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  rc_unidad_resolver = component 'UnidadResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones de unidades'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  // ===== â¬œ MODELOS/ENTIDADES =====
  rc_recurso_model = component 'Recurso Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para recursos'

    style {
      color slate  // Gris para modelos
    }
  }

  rc_tipo_recurso_model = component 'TipoRecurso Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para tipos de recursos'

    style {
      color slate  // Gris para modelos
    }
  }

  rc_unidad_model = component 'Unidad Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para unidades de medida'

    style {
      color slate  // Gris para modelos
    }
  }

  rc_clasificacion_recurso_model = component 'ClasificacionRecurso Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para clasificaciones de recursos'

    style {
      color slate  // Gris para modelos
    }
  }

  rc_tipo_costo_recurso_model = component 'TipoCostoRecurso Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para tipos de costo de recursos'

    style {
      color slate  // Gris para modelos
    }
  }

  // ===== âš« SERVICIOS ESPECIALIZADOS =====
  rc_recurso_presupuesto_service = application 'RecursoPresupuestoService' {
    description 'Servicio para recursos asociados a presupuestos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_recurso_obra_service = application 'RecursoObraService' {
    description 'Servicio para recursos asociados a obras'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_recurso_seguimiento_total_service = application 'RecursoSeguimientoTotalService' {
    description 'Servicio para seguimiento completo de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE CLASIFICACIÃ“N =====
  rc_clasificacion_recurso_service = application 'ClasificacionRecursoService' {
    description 'Servicio para clasificaciÃ³n de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_tipo_costo_recurso_service = application 'TipoCostoRecursoService' {
    description 'Servicio para tipos de costo de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE TRAZABILIDAD =====
  rc_trazar_recursos_service = application 'TrazarRecursosService' {
    description 'Sistema de trazabilidad de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_sincronizar_recursos_service = application 'SincronizarRecursosService' {
    description 'Servicio para sincronizaciÃ³n de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE APU =====
  rc_recurso_composicion_apu_service = application 'RecursoComposicionApuService' {
    description 'Servicio para recursos en composiciones APU'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE PRECIOS =====
  rc_precio_recurso_proyecto_service = application 'PrecioRecursoProyectoService' {
    description 'Servicio para precios de recursos por proyecto'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE CONSUMO =====
  rc_consumo_recurso_service = application 'ConsumoRecursoService' {
    description 'Servicio para consumo de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_consumo_service = application 'ConsumoService' {
    description 'Servicio principal para gestiÃ³n de consumos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE MOVIMIENTOS =====
  rc_prestamo_recurso_service = application 'PrestamoRecursoService' {
    description 'Servicio para prÃ©stamos de recursos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  rc_prestamo_service = application 'PrestamoService' {
    description 'Servicio principal para gestiÃ³n de prÃ©stamos'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== âš« INFRAESTRUCTURA =====
  rc_mongodb = database 'MongoDB' {
    description 'Base de datos principal MongoDB'
    icon tech:mongodb
  }

  rc_redis = database 'Redis' {
    description 'Sistema de cache Redis'
    icon tech:redis
  }

  rc_queue_service = queue 'Queue Service' {
    description 'Sistema de colas para procesamiento asÃ­ncrono'
  }

  // ===== ðŸ”„ RELACIONES REALES =====

  // API â†’ Resolvers
  rc_graphql_api -> rc_recurso_resolver 'Procesa queries/mutations'
  rc_graphql_api -> rc_tipo_recurso_resolver 'Procesa queries/mutations'
  rc_graphql_api -> rc_unidad_resolver 'Procesa queries/mutations'

  // Resolvers â†’ Servicios Principales
  rc_recurso_resolver -> rc_recurso_service 'Delega operaciones'
  rc_tipo_recurso_resolver -> rc_tipo_recurso_service 'Delega operaciones'
  rc_unidad_resolver -> rc_unidad_service 'Delega operaciones'

  // Servicios Principales â†’ Modelos
  rc_recurso_service -> rc_recurso_model 'Persiste datos'
  rc_tipo_recurso_service -> rc_tipo_recurso_model 'Persiste datos'
  rc_unidad_service -> rc_unidad_model 'Persiste datos'

  // Servicios Especializados â†’ Modelos
  rc_recurso_presupuesto_service -> rc_recurso_model 'AsociaciÃ³n presupuestos'
  rc_recurso_obra_service -> rc_recurso_model 'AsociaciÃ³n obras'
  rc_recurso_seguimiento_total_service -> rc_recurso_model 'Seguimiento completo'

  // Servicios de ClasificaciÃ³n â†’ Modelos
  rc_clasificacion_recurso_service -> rc_clasificacion_recurso_model 'Clasifica recursos'
  rc_tipo_costo_recurso_service -> rc_tipo_costo_recurso_model 'Define costos'

  // Servicios de Trazabilidad â†’ Modelos
  rc_trazar_recursos_service -> rc_recurso_model 'Trazabilidad'
  rc_sincronizar_recursos_service -> rc_recurso_model 'SincronizaciÃ³n'

  // Servicios de APU â†’ Modelos
  rc_recurso_composicion_apu_service -> rc_recurso_model 'Composiciones APU'

  // Servicios de Precios â†’ Modelos
  rc_precio_recurso_proyecto_service -> rc_recurso_model 'Precios por proyecto'

  // Servicios de Consumo â†’ Modelos
  rc_consumo_recurso_service -> rc_recurso_model 'Registra consumos'
  rc_consumo_service -> rc_recurso_model 'Gestiona consumos'

  // Servicios de Movimientos â†’ Modelos
  rc_prestamo_recurso_service -> rc_recurso_model 'PrÃ©stamos recursos'
  rc_prestamo_service -> rc_recurso_model 'Gestiona prÃ©stamos'

  // Servicios colaboran entre sÃ­ (Flujo de Recursos)
  rc_recurso_service -> rc_tipo_recurso_service 'Clasifica tipos'
  rc_recurso_service -> rc_unidad_service 'Define unidades'
  rc_recurso_service -> rc_clasificacion_recurso_service 'Clasifica recursos'
  rc_recurso_service -> rc_tipo_costo_recurso_service 'Define costos'

  rc_recurso_service -> rc_recurso_presupuesto_service 'Integra presupuestos'
  rc_recurso_service -> rc_recurso_obra_service 'Integra obras'
  rc_recurso_service -> rc_recurso_seguimiento_total_service 'Seguimiento total'
  rc_recurso_service -> rc_recurso_composicion_apu_service 'Integra APU'

  rc_recurso_service -> rc_precio_recurso_proyecto_service 'Gestiona precios'
  rc_recurso_service -> rc_consumo_recurso_service 'Controla consumos'
  rc_recurso_service -> rc_prestamo_recurso_service 'Gestiona prÃ©stamos'

  rc_recurso_service -> rc_trazar_recursos_service 'Trazabilidad'
  rc_recurso_service -> rc_sincronizar_recursos_service 'SincronizaciÃ³n'

  rc_consumo_service -> rc_consumo_recurso_service 'Detalla consumos'
  rc_prestamo_service -> rc_prestamo_recurso_service 'Detalla prÃ©stamos'

  // Servicios â†’ Infraestructura
  rc_recurso_service -> rc_mongodb 'Accede a base de datos'
  rc_tipo_recurso_service -> rc_mongodb 'Accede a base de datos'
  rc_unidad_service -> rc_mongodb 'Accede a base de datos'

  rc_recurso_service -> rc_redis 'Usa cache'
  rc_tipo_recurso_service -> rc_redis 'Usa cache'

  // Servicios de Trazabilidad â†’ Queue
  rc_sincronizar_recursos_service -> rc_queue_service 'Sincroniza async'
}