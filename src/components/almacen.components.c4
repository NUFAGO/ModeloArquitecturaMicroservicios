// components/almacen.components.c4 - Microservicio de AlmacÃ©n (KAPO PRINCIPAL - ESTRUCTURA REAL)

model {
  // ===== ðŸŸ¦ API GRAPHQL =====
  al_graphql_api = application 'GraphQL API' {
    description 'API GraphQL principal del backend para mÃ³dulo de almacÃ©n'
    technology 'Apollo Server + Express.js'

    style {
      color blue  // Azul para APIs
    }
  }

  // ===== ðŸŸ© SERVICIOS PRINCIPALES =====
  al_almacen_service = application 'AlmacenService' {
    description 'Servicio principal para gestiÃ³n de almacenes'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_bodega_service = application 'BodegaService' {
    description 'Servicio para gestiÃ³n de bodegas'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_transferencia_service = application 'TransferenciaService' {
    description 'Servicio para gestiÃ³n de transferencias entre almacenes'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸŸ¨ RESOLVERS =====
  al_almacen_resolver = component 'AlmacenResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones CRUD de almacenes'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  al_bodega_resolver = component 'BodegaResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones de bodegas'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  al_transferencia_resolver = component 'TransferenciaResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones de transferencias'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  al_inventario_resolver = component 'InventarioResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones de inventarios'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  al_recepcion_resolver = component 'RecepcionResolver' {
    technology 'GraphQL Resolver'
    description 'Resolver para operaciones de recepciones'

    style {
      color amber  // Amarillo para resolvers
    }
  }

  // ===== â¬œ MODELOS/ENTIDADES =====
  al_almacen_model = component 'Almacen Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para almacenes'

    style {
      color slate  // Gris para modelos
    }
  }

  al_bodega_model = component 'Bodega Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para bodegas'

    style {
      color slate  // Gris para modelos
    }
  }

  al_transferencia_model = component 'Transferencia Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para transferencias'

    style {
      color slate  // Gris para modelos
    }
  }

  al_tipo_almacen_model = component 'TipoAlmacen Model' {
    technology 'Mongoose Schema'
    description 'Modelo de datos para tipos de almacÃ©n'

    style {
      color slate  // Gris para modelos
    }
  }

  // ===== âš« SERVICIOS ESPECIALIZADOS =====
  al_almacen_recurso_service = application 'AlmacenRecursoService' {
    description 'Servicio para gestiÃ³n de recursos en almacenes'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_registro_almacen_service = application 'RegistroAlmacenService' {
    description 'Servicio para registro de movimientos en almacÃ©n'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_solicitud_almacen_service = application 'SolicitudAlmacenService' {
    description 'Servicio para gestiÃ³n de solicitudes de almacÃ©n'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE CENTROS DE COSTO =====
  al_almacen_centro_costo_service = application 'AlmacenCentroCostoService' {
    description 'Servicio para relaciÃ³n almacÃ©n-centro de costo'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE TRANSFERENCIAS =====
  al_transferencia_recurso_service = application 'TransferenciaRecursoService' {
    description 'Servicio para recursos en transferencias'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_guia_transferencia_service = application 'GuiaTransferenciaService' {
    description 'Servicio para guÃ­as de transferencias'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE INVENTARIO =====
  al_inventario_service = application 'InventarioService' {
    description 'Servicio para gestiÃ³n de inventarios'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== ðŸ”„ SERVICIOS DE REPORTES =====
  al_reporte_almacen_service = application 'ReporteAlmacenService' {
    description 'Servicio para reportes de almacÃ©n'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_almacen_completo_service = application 'AlmacenCompletoService' {
    description 'Servicio completo para gestiÃ³n integral de almacÃ©n'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_recepcion_service = application 'RecepcionService' {
    description 'Servicio para gestiÃ³n de recepciones de mercancÃ­a'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_producto_service = application 'ProductoService' {
    description 'Servicio para gestiÃ³n de productos en almacÃ©n'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  al_dashboard_almacen_service = application 'DashboardAlmacenService' {
    description 'Servicio para dashboard y mÃ©tricas de almacÃ©n'
    technology 'TypeScript + Node.js'

    style {
      color green  // Verde para servicios
    }
  }

  // ===== âš« INFRAESTRUCTURA =====
  al_mongodb = database 'MongoDB' {
    description 'Base de datos principal MongoDB'
    icon tech:mongodb
  }

  al_redis = database 'Redis' {
    description 'Sistema de cache Redis'
    icon tech:redis
  }

  al_queue_service = queue 'Queue Service' {
    description 'Sistema de colas para procesamiento asÃ­ncrono'
  }

  // ===== REPOSITORIES =====
  al_almacen_repo = component 'Almacen Repository' {
    technology 'Mongoose ODM'
    description 'Acceso a datos para almacenes'

    style {
      color slate  // Gris para modelos
    }
  }

  al_inventario_repo = component 'Inventario Repository' {
    technology 'Mongoose ODM'
    description 'Acceso a datos para inventarios'

    style {
      color slate  // Gris para modelos
    }
  }

  al_transferencia_repo = component 'Transferencia Repository' {
    technology 'Mongoose ODM'
    description 'Acceso a datos para transferencias'

    style {
      color slate  // Gris para modelos
    }
  }

  al_bodega_repo = component 'Bodega Repository' {
    technology 'Mongoose ODM'
    description 'Acceso a datos para bodegas'

    style {
      color slate  // Gris para modelos
    }
  }

  al_recepcion_repo = component 'Recepcion Repository' {
    technology 'Mongoose ODM'
    description 'Acceso a datos para recepciones'

    style {
      color slate  // Gris para modelos
    }
  }

  al_producto_repo = component 'Producto Repository' {
    technology 'Mongoose ODM'
    description 'Acceso a datos para productos'

    style {
      color slate  // Gris para modelos
    }
  }

  // ===== ðŸ”„ RELACIONES REALES =====

  // API â†’ Resolvers
  al_graphql_api -> al_almacen_resolver 'Procesa queries/mutations'
  al_graphql_api -> al_bodega_resolver 'Procesa queries/mutations'
  al_graphql_api -> al_transferencia_resolver 'Procesa queries/mutations'
  al_graphql_api -> al_inventario_resolver 'Procesa queries/mutations'
  al_graphql_api -> al_recepcion_resolver 'Procesa queries/mutations'

  // Resolvers â†’ Servicios Principales
  al_almacen_resolver -> al_almacen_service 'Delega operaciones'
  al_bodega_resolver -> al_bodega_service 'Delega operaciones'
  al_transferencia_resolver -> al_transferencia_service 'Delega operaciones'
  al_inventario_resolver -> al_inventario_service 'Delega operaciones'
  al_recepcion_resolver -> al_recepcion_service 'Delega operaciones'

  // Servicios Principales â†’ Modelos
  al_almacen_service -> al_almacen_model 'Persiste datos'
  al_bodega_service -> al_bodega_model 'Persiste datos'
  al_transferencia_service -> al_transferencia_model 'Persiste datos'

  // Servicios Especializados â†’ Modelos
  al_almacen_recurso_service -> al_almacen_model 'Relaciona recursos'
  al_registro_almacen_service -> al_almacen_model 'Registra movimientos'
  al_solicitud_almacen_service -> al_almacen_model 'Gestiona solicitudes'
  al_almacen_completo_service -> al_almacen_model 'GestiÃ³n integral'
  al_recepcion_service -> al_almacen_model 'Registra recepciones'
  al_producto_service -> al_almacen_model 'Gestiona productos'
  al_dashboard_almacen_service -> al_almacen_model 'Genera mÃ©tricas'

  // Servicios de Centros de Costo â†’ Modelos
  al_almacen_centro_costo_service -> al_almacen_model 'Asocia centros costo'

  // Servicios de Transferencias â†’ Modelos
  al_transferencia_recurso_service -> al_transferencia_model 'Detalla recursos'
  al_guia_transferencia_service -> al_transferencia_model 'Genera guÃ­as'

  // Servicios de Inventario â†’ Modelos
  al_inventario_service -> al_almacen_model 'Controla inventarios'

  // Servicios de Reportes â†’ Modelos
  al_reporte_almacen_service -> al_almacen_model 'Genera reportes'

  // Servicios colaboran entre sÃ­ (Flujo de AlmacÃ©n)
  al_almacen_service -> al_bodega_service 'Gestiona bodegas'
  al_almacen_service -> al_almacen_recurso_service 'Controla recursos'
  al_almacen_service -> al_registro_almacen_service 'Registra movimientos'
  al_almacen_service -> al_solicitud_almacen_service 'Procesa solicitudes'
  al_almacen_service -> al_almacen_centro_costo_service 'Asocia costos'
  al_almacen_service -> al_inventario_service 'Mantiene inventarios'
  al_almacen_service -> al_reporte_almacen_service 'Genera reportes'
  al_almacen_service -> al_almacen_completo_service 'GestiÃ³n integral'
  al_almacen_service -> al_recepcion_service 'Gestiona recepciones'
  al_almacen_service -> al_producto_service 'Controla productos'
  al_almacen_service -> al_dashboard_almacen_service 'Muestra mÃ©tricas'

  al_transferencia_service -> al_transferencia_recurso_service 'Detalla recursos'
  al_transferencia_service -> al_guia_transferencia_service 'Genera guÃ­as'
  al_transferencia_service -> al_registro_almacen_service 'Registra salidas/entradas'

  al_solicitud_almacen_service -> al_transferencia_service 'Genera transferencias'
  al_inventario_service -> al_reporte_almacen_service 'Reporta discrepancias'

  // Servicios â†’ Infraestructura
  al_almacen_service -> al_mongodb 'Accede a base de datos'
  al_bodega_service -> al_mongodb 'Accede a base de datos'
  al_transferencia_service -> al_mongodb 'Accede a base de datos'

  al_almacen_service -> al_redis 'Usa cache'
  al_bodega_service -> al_redis 'Usa cache'
  al_transferencia_service -> al_redis 'Usa cache'

  // Servicios de Reportes â†’ Queue
  al_reporte_almacen_service -> al_queue_service 'Genera reportes async'

  // Todos los servicios usan repositories
  al_almacen_service -> al_almacen_repo 'Repository'
  al_inventario_service -> al_inventario_repo 'Repository'
  al_transferencia_service -> al_transferencia_repo 'Repository'
  al_bodega_service -> al_bodega_repo 'Repository'
  al_recepcion_service -> al_recepcion_repo 'Repository'
  al_producto_service -> al_producto_repo 'Repository'
}